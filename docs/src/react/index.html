<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>组件通讯 | hisey</title>
    <meta name="description" content="不一样的世界，等你去发现">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="stylesheet" href="/front-end-doc/font/iconfont.css">
  <link rel="stylesheet" href="/front-end-doc/style/index.css">
    
    <link rel="preload" href="/front-end-doc/assets/css/0.styles.46df3d32.css" as="style"><link rel="preload" href="/front-end-doc/assets/js/app.37fee4b8.js" as="script"><link rel="preload" href="/front-end-doc/assets/js/3.6a1b549d.js" as="script"><link rel="preload" href="/front-end-doc/assets/js/24.f23306d6.js" as="script"><link rel="prefetch" href="/front-end-doc/assets/js/1.f100aa9d.js"><link rel="prefetch" href="/front-end-doc/assets/js/10.a48a0454.js"><link rel="prefetch" href="/front-end-doc/assets/js/11.5cb73eb0.js"><link rel="prefetch" href="/front-end-doc/assets/js/12.592ec808.js"><link rel="prefetch" href="/front-end-doc/assets/js/13.7207e920.js"><link rel="prefetch" href="/front-end-doc/assets/js/14.468ea87b.js"><link rel="prefetch" href="/front-end-doc/assets/js/15.7f3a4a46.js"><link rel="prefetch" href="/front-end-doc/assets/js/16.acf65e99.js"><link rel="prefetch" href="/front-end-doc/assets/js/17.5eb3cab4.js"><link rel="prefetch" href="/front-end-doc/assets/js/18.b14c05c5.js"><link rel="prefetch" href="/front-end-doc/assets/js/19.c4b027cd.js"><link rel="prefetch" href="/front-end-doc/assets/js/20.53c85761.js"><link rel="prefetch" href="/front-end-doc/assets/js/21.96735168.js"><link rel="prefetch" href="/front-end-doc/assets/js/22.b6682ad5.js"><link rel="prefetch" href="/front-end-doc/assets/js/23.e875a1e7.js"><link rel="prefetch" href="/front-end-doc/assets/js/25.74c35d5a.js"><link rel="prefetch" href="/front-end-doc/assets/js/26.f47c5441.js"><link rel="prefetch" href="/front-end-doc/assets/js/27.58937669.js"><link rel="prefetch" href="/front-end-doc/assets/js/28.a9c60825.js"><link rel="prefetch" href="/front-end-doc/assets/js/29.5c0aa5b7.js"><link rel="prefetch" href="/front-end-doc/assets/js/30.c6056f84.js"><link rel="prefetch" href="/front-end-doc/assets/js/31.45e79d7c.js"><link rel="prefetch" href="/front-end-doc/assets/js/32.7a83abe9.js"><link rel="prefetch" href="/front-end-doc/assets/js/33.201c94df.js"><link rel="prefetch" href="/front-end-doc/assets/js/34.304ceef7.js"><link rel="prefetch" href="/front-end-doc/assets/js/4.3732f64e.js"><link rel="prefetch" href="/front-end-doc/assets/js/5.0d8afd27.js"><link rel="prefetch" href="/front-end-doc/assets/js/6.ffaa2907.js"><link rel="prefetch" href="/front-end-doc/assets/js/7.a10ba6b1.js"><link rel="prefetch" href="/front-end-doc/assets/js/8.2560fe09.js"><link rel="prefetch" href="/front-end-doc/assets/js/9.92f3d637.js">
    <link rel="stylesheet" href="/front-end-doc/assets/css/0.styles.46df3d32.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/front-end-doc/" class="home-link router-link-active"><!----> <span class="site-name">hisey</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/front-end-doc/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Git指南" class="dropdown-title"><span class="title">Git指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-doc/src/base/git/flow.html" class="nav-link">
  Git工作流
</a></li><li class="dropdown-item"><!----> <a href="/front-end-doc/src/base/git/bash.html" class="nav-link">
  常用命令行
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-doc/src/base/codeStyle/" class="nav-link">
  es6代码风格
</a></li><li class="dropdown-item"><!----> <a href="/front-end-doc/src/base/cssDoc/" class="nav-link">
  css干货
</a></li><li class="dropdown-item"><!----> <a href="/front-end-doc/src/base/jsDoc/" class="nav-link">
  js干货
</a></li><li class="dropdown-item"><!----> <a href="/front-end-doc/src/base/jsDoc/tools.html" class="nav-link">
  常用工具
</a></li><li class="dropdown-item"><!----> <a href="/front-end-doc/src/base/flexbox/" class="nav-link">
  弹性盒子布局
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发技巧" class="dropdown-title"><span class="title">开发技巧</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-doc/src/skill/" class="nav-link">
  css篇
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="解决方案" class="dropdown-title"><span class="title">解决方案</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-doc/src/case/webSplit/" class="nav-link">
  前后端分离
</a></li><li class="dropdown-item"><!----> <a href="/front-end-doc/src/case/autoDeploy/" class="nav-link">
  代码部署
</a></li><li class="dropdown-item"><!----> <a href="/front-end-doc/src/case/websocket/" class="nav-link">
  websocket
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="小程序" class="dropdown-title"><span class="title">小程序</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-doc/src/smallProgram/mpvue/" class="nav-link">
  mpvue搭建小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="react" class="dropdown-title"><span class="title">react</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-doc/src/react/" class="nav-link router-link-exact-active router-link-active">
  基础知识整理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vue" class="dropdown-title"><span class="title">vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-doc/src/vue/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/front-end-doc/src/vue/vueCompont/" class="nav-link">
  组件示例
</a></li><li class="dropdown-item"><!----> <a href="/front-end-doc/src/vue/debug.html" class="nav-link">
  断点调试
</a></li><li class="dropdown-item"><!----> <a href="/front-end-doc/src/vue/elegant.html" class="nav-link">
  优雅写法
</a></li><li class="dropdown-item"><!----> <a href="/front-end-doc/src/vue/slill.html" class="nav-link">
  实用骚操作
</a></li><li class="dropdown-item"><!----> <a href="/front-end-doc/src/vue/standards.html" class="nav-link">
  代码规范
</a></li><li class="dropdown-item"><!----> <a href="/front-end-doc/src/vue/testCenter.html" class="nav-link">
  常见考点
</a></li></ul></div></div><div class="nav-item"><a href="/front-end-doc/src/favorites/" class="nav-link">
  收藏夹
</a></div><div class="nav-item"><a href="/front-end-doc/src/aboutMe/" class="nav-link">
  关于我
</a></div> <a href="https://github.com//hisey/front-end-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    gitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/front-end-doc/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Git指南" class="dropdown-title"><span class="title">Git指南</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-doc/src/base/git/flow.html" class="nav-link">
  Git工作流
</a></li><li class="dropdown-item"><!----> <a href="/front-end-doc/src/base/git/bash.html" class="nav-link">
  常用命令行
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-doc/src/base/codeStyle/" class="nav-link">
  es6代码风格
</a></li><li class="dropdown-item"><!----> <a href="/front-end-doc/src/base/cssDoc/" class="nav-link">
  css干货
</a></li><li class="dropdown-item"><!----> <a href="/front-end-doc/src/base/jsDoc/" class="nav-link">
  js干货
</a></li><li class="dropdown-item"><!----> <a href="/front-end-doc/src/base/jsDoc/tools.html" class="nav-link">
  常用工具
</a></li><li class="dropdown-item"><!----> <a href="/front-end-doc/src/base/flexbox/" class="nav-link">
  弹性盒子布局
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发技巧" class="dropdown-title"><span class="title">开发技巧</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-doc/src/skill/" class="nav-link">
  css篇
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="解决方案" class="dropdown-title"><span class="title">解决方案</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-doc/src/case/webSplit/" class="nav-link">
  前后端分离
</a></li><li class="dropdown-item"><!----> <a href="/front-end-doc/src/case/autoDeploy/" class="nav-link">
  代码部署
</a></li><li class="dropdown-item"><!----> <a href="/front-end-doc/src/case/websocket/" class="nav-link">
  websocket
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="小程序" class="dropdown-title"><span class="title">小程序</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-doc/src/smallProgram/mpvue/" class="nav-link">
  mpvue搭建小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="react" class="dropdown-title"><span class="title">react</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-doc/src/react/" class="nav-link router-link-exact-active router-link-active">
  基础知识整理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vue" class="dropdown-title"><span class="title">vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-doc/src/vue/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/front-end-doc/src/vue/vueCompont/" class="nav-link">
  组件示例
</a></li><li class="dropdown-item"><!----> <a href="/front-end-doc/src/vue/debug.html" class="nav-link">
  断点调试
</a></li><li class="dropdown-item"><!----> <a href="/front-end-doc/src/vue/elegant.html" class="nav-link">
  优雅写法
</a></li><li class="dropdown-item"><!----> <a href="/front-end-doc/src/vue/slill.html" class="nav-link">
  实用骚操作
</a></li><li class="dropdown-item"><!----> <a href="/front-end-doc/src/vue/standards.html" class="nav-link">
  代码规范
</a></li><li class="dropdown-item"><!----> <a href="/front-end-doc/src/vue/testCenter.html" class="nav-link">
  常见考点
</a></li></ul></div></div><div class="nav-item"><a href="/front-end-doc/src/favorites/" class="nav-link">
  收藏夹
</a></div><div class="nav-item"><a href="/front-end-doc/src/aboutMe/" class="nav-link">
  关于我
</a></div> <a href="https://github.com//hisey/front-end-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    gitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>组件通讯</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/front-end-doc/src/react/#_1-1-props" class="sidebar-link">1.1 props</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#_1-2-props-升级版" class="sidebar-link">1.2 props 升级版</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#_1-3-provider-consumer和context" class="sidebar-link">1.3 Provider,Consumer和Context</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#_1-4-路由传参" class="sidebar-link">1.4 路由传参</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end-doc/src/react/#_1-params" class="sidebar-link">1.params</a></li><li class="sidebar-sub-header"><a href="/front-end-doc/src/react/#_2-query" class="sidebar-link">2.query</a></li><li class="sidebar-sub-header"><a href="/front-end-doc/src/react/#_3-state" class="sidebar-link">3.state</a></li><li class="sidebar-sub-header"><a href="/front-end-doc/src/react/#_4-search" class="sidebar-link">4.search</a></li></ul></li><li><a href="/front-end-doc/src/react/#_1-5-onref" class="sidebar-link">1.5 onRef</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#_1-7-ref" class="sidebar-link">1.7 ref</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#_1-8-redux" class="sidebar-link">1.8 redux</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#_1-9-mobx" class="sidebar-link">1.9 MobX</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#_1-10-flux" class="sidebar-link">1.10 flux</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#_1-11-hooks" class="sidebar-link">1.11 hooks</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#_1-12-require-context" class="sidebar-link">1.12 require.context()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#_1-13-decorator" class="sidebar-link">1.13 Decorator</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#_1-14-使用-if-else" class="sidebar-link">1.14 使用 if...else</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#_1-15-state-值改变的四种方式" class="sidebar-link">1.15 state 值改变的四种方式</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#_1-16-监听states-变化" class="sidebar-link">1.16 监听states 变化</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#_1-17-通过-ref-属性获取-component" class="sidebar-link">1.17 通过 ref 属性获取 component</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#_1-18-static-使用" class="sidebar-link">1.18 static 使用</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#_1-19-proptypes" class="sidebar-link">1.19 PropTypes</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#元素是否显示" class="sidebar-link">元素是否显示</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#dialog-组件创建" class="sidebar-link">Dialog 组件创建</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#react-memo" class="sidebar-link">React.memo</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#react-purecomponent" class="sidebar-link">React.PureComponent</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#react-component" class="sidebar-link">React.Component</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#在-jsx-打印-falsy-值" class="sidebar-link">在 JSX 打印 falsy 值</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#reactdom-createportal" class="sidebar-link">ReactDOM.createPortal</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#在-react-使用innerhtml" class="sidebar-link">在 React 使用innerHTML</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#react-createelement" class="sidebar-link">React.createElement</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#react-cloneelement" class="sidebar-link">React.cloneElement</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#react-fragment" class="sidebar-link">React.Fragment</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#绑定事件" class="sidebar-link">绑定事件</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#给-dom-设置和获取自定义属性" class="sidebar-link">给 DOM 设置和获取自定义属性</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#循环元素" class="sidebar-link">循环元素</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#react-router" class="sidebar-link">React-Router</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#_1-v3和-v4的区别" class="sidebar-link">1 V3和 V4的区别</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#_2-使用" class="sidebar-link">2 使用</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#样式引入方法" class="sidebar-link">样式引入方法</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/front-end-doc/src/react/#动态绑定-classname" class="sidebar-link">动态绑定 className</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="组件通讯"><a href="#组件通讯" class="header-anchor">#</a> 组件通讯</h1> <h2 id="_1-1-props"><a href="#_1-1-props" class="header-anchor">#</a> 1.1 props</h2> <p>子组件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span><span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">&quot;prop-types&quot;</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;antd&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">EightteenChildOne</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

  <span class="token keyword">static</span> propTypes <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">//propTypes校验传入类型,详情在技巧11</span>

    name<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string

  <span class="token punctuation">}</span><span class="token punctuation">;</span>

 

  <span class="token function-variable function">click</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token comment">// 通过触发方法子传父</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">eightteenChildOneToFather</span><span class="token punctuation">(</span><span class="token string">&quot;这是 props 改变父元素的值&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span><span class="token punctuation">;</span>

 

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>

      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>这是通过 props 传入的值<span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>click<span class="token punctuation">}</span><span class="token operator">&gt;</span>

          点击改变父元素值

        <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>父组件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>EightteenChildOne name<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'props 传入的 name 值'</span><span class="token punctuation">}</span> eightteenChildOneToFather<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">mode</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">eightteenChildOneToFather</span><span class="token punctuation">(</span>mode<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>EightteenChildOne<span class="token operator">&gt;</span>
</code></pre></div><p>props 传多个值时:</p> <h4 id="传统写法"><a href="#传统写法" class="header-anchor">#</a> 传统写法</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>dataOne<span class="token punctuation">,</span>dataTwo<span class="token punctuation">,</span>dataThree<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token operator">&lt;</span>Com dataOne<span class="token operator">=</span><span class="token punctuation">{</span>dataOne<span class="token punctuation">}</span> dataTwo<span class="token operator">=</span><span class="token punctuation">{</span>dataTwo<span class="token punctuation">}</span> dataThree<span class="token operator">=</span><span class="token punctuation">{</span>dataThree<span class="token punctuation">}</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="升级写法"><a href="#升级写法" class="header-anchor">#</a> 升级写法</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Com <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">{</span>dataOne<span class="token punctuation">,</span>dataTwo<span class="token punctuation">,</span>dataThree<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
</code></pre></div><h2 id="_1-2-props-升级版"><a href="#_1-2-props-升级版" class="header-anchor">#</a> 1.2 props 升级版</h2> <p>原理:子组件里面利用 props 获取父组件方法直接调用,从而改变父组件的值
注意: 此方法和 props 大同小异,都是 props 的应用,所以在源码中没有举例</p> <p>调用父组件方法改变该值</p> <p>// 父组件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>state <span class="token operator">=</span> <span class="token punctuation">{</span>

  count<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token function-variable function">changeParentState</span> <span class="token operator">=</span> <span class="token parameter">obj</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token comment">// 子组件</span>

<span class="token function-variable function">onClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">changeParentState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><h2 id="_1-3-provider-consumer和context"><a href="#_1-3-provider-consumer和context" class="header-anchor">#</a> 1.3 Provider,Consumer和Context</h2> <p>1.Context在 16.x 之前是定义一个全局的对象,类似 vue 的 eventBus,如果组件要使用到该值直接通过this.context获取</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//根组件class MessageList extends React.Component {</span>

  <span class="token function">getChildContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>color<span class="token operator">:</span> <span class="token string">&quot;purple&quot;</span><span class="token punctuation">,</span>text<span class="token operator">:</span> <span class="token string">&quot;item text&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

 

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">const</span> children <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>messages<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>

      <span class="token operator">&lt;</span>Message text<span class="token operator">=</span><span class="token punctuation">{</span>message<span class="token punctuation">.</span>text<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

MessageList<span class="token punctuation">.</span>childContextTypes <span class="token operator">=</span> <span class="token punctuation">{</span>

  color<span class="token operator">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>string

  text<span class="token operator">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>string

<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//中间组件class Message extends React.Component {</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>

      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>MessageItem <span class="token operator">/</span><span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>Button<span class="token operator">&gt;</span>Delete<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token comment">//孙组件(接收组件)class MessageItem extends React.Component {</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>

      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>

        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>text<span class="token punctuation">}</span>

      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

MessageItem<span class="token punctuation">.</span>contextTypes <span class="token operator">=</span> <span class="token punctuation">{</span>

  text<span class="token operator">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>string <span class="token comment">//React.PropTypes在 15.5 版本被废弃,看项目实际的 React 版本</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Button</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>

      <span class="token operator">&lt;</span>button style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>background<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>color<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>

        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span>

      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>

    <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

Button<span class="token punctuation">.</span>contextTypes <span class="token operator">=</span> <span class="token punctuation">{</span>

  color<span class="token operator">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>string

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>2.16.x 之后的Context使用了Provider和Customer模式,在顶层的Provider中传入value，在子孙级的Consumer中获取该值，并且能够传递函数，用来修改context
声明一个全局的 context 定义,context.js</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">let</span> <span class="token punctuation">{</span> Consumer<span class="token punctuation">,</span> Provider <span class="token punctuation">}</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//创建 context 并暴露Consumer和Provider模式export {</span>

    Consumer<span class="token punctuation">,</span>

    Provider

<span class="token punctuation">}</span>
</code></pre></div><p>父组件导入</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 导入 Provider</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span>Provider<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../../utils/context&quot;</span>

<span class="token operator">&lt;</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&gt;</span>

  <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>border<span class="token operator">:</span><span class="token string">'1px solid red'</span><span class="token punctuation">,</span>width<span class="token operator">:</span><span class="token string">'30%'</span><span class="token punctuation">,</span>margin<span class="token operator">:</span><span class="token string">'50px auto'</span><span class="token punctuation">,</span>textAlign<span class="token operator">:</span><span class="token string">'center'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>父组件定义的值<span class="token operator">:</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>EightteenChildTwo<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>EightteenChildTwo<span class="token operator">&gt;</span>

  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">&gt;</span>
</code></pre></div><p>子组件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 导入Consumer</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> Consumer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../../utils/context&quot;</span><span class="token keyword">function</span> <span class="token function">Son</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>

    <span class="token comment">//Consumer容器,可以拿到上文传递下来的name属性,并可以展示对应的值</span>

    <span class="token operator">&lt;</span>Consumer<span class="token operator">&gt;</span>

      <span class="token punctuation">{</span><span class="token parameter">name</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>

        <span class="token operator">&lt;</span>div

          style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>

            border<span class="token operator">:</span> <span class="token string">&quot;1px solid blue&quot;</span><span class="token punctuation">,</span>

            width<span class="token operator">:</span> <span class="token string">&quot;60%&quot;</span><span class="token punctuation">,</span>

            margin<span class="token operator">:</span> <span class="token string">&quot;20px auto&quot;</span><span class="token punctuation">,</span>

            textAlign<span class="token operator">:</span> <span class="token string">&quot;center&quot;</span>

          <span class="token punctuation">}</span><span class="token punctuation">}</span>

        <span class="token operator">&gt;</span>

        <span class="token comment">// 在 Consumer 中可以直接通过 name 获取父组件的值</span>

          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>子组件。获取父组件的值<span class="token operator">:</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

      <span class="token punctuation">)</span><span class="token punctuation">}</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span>Consumer<span class="token operator">&gt;</span>

  <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Son<span class="token punctuation">;</span>
</code></pre></div><h2 id="_1-4-路由传参"><a href="#_1-4-路由传参" class="header-anchor">#</a> 1.4 路由传参</h2> <h3 id="_1-params"><a href="#_1-params" class="header-anchor">#</a> 1.params</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/path/:name'</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Path<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>link to<span class="token operator">=</span><span class="token string">&quot;/path/2&quot;</span><span class="token operator">&gt;</span>xxx<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>pathname<span class="token operator">:</span><span class="token string">&quot;/path/&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>读取参数用:this.props.match.params.name</p> <h3 id="_2-query"><a href="#_2-query" class="header-anchor">#</a> 2.query</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/query'</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Query<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> path <span class="token operator">:</span> <span class="token string">'/query'</span> <span class="token punctuation">,</span> query <span class="token operator">:</span> <span class="token punctuation">{</span> name <span class="token operator">:</span> <span class="token string">'sunny'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>pathname<span class="token operator">:</span><span class="token string">&quot;/query&quot;</span><span class="token punctuation">,</span>query<span class="token operator">:</span> <span class="token punctuation">{</span> name <span class="token operator">:</span> <span class="token string">'sunny'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>读取参数用: this.props.location.query.name</p> <h3 id="_3-state"><a href="#_3-state" class="header-anchor">#</a> 3.state</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/sort '</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Sort<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> path <span class="token operator">:</span> <span class="token string">'/sort '</span> <span class="token punctuation">,</span> state <span class="token operator">:</span> <span class="token punctuation">{</span> name <span class="token operator">:</span> <span class="token string">'sunny'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>pathname<span class="token operator">:</span><span class="token string">&quot;/sort &quot;</span><span class="token punctuation">,</span>state <span class="token operator">:</span> <span class="token punctuation">{</span> name <span class="token operator">:</span> <span class="token string">'sunny'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>读取参数用: this.props.location.query.state</p> <h3 id="_4-search"><a href="#_4-search" class="header-anchor">#</a> 4.search</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/web/search '</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Search<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>link to<span class="token operator">=</span><span class="token string">&quot;web/search?id=12121212&quot;</span><span class="token operator">&gt;</span>xxx<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>pathname<span class="token operator">:</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/web/search?id </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>row<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>读取参数用: this.props.location.search</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>1.params和 search 只能传字符串,刷新页面参数不会丢2.query和 state 可以传对象,但是刷新页面参数会丢失</p></div> <h2 id="_1-5-onref"><a href="#_1-5-onref" class="header-anchor">#</a> 1.5 onRef</h2> <p>原理:onRef 通讯原理就是通过 props 的事件机制将组件的 this(组件实例)当做参数传到父组件,父组件就可以操作子组件的 state 和方法</p> <p>EightteenChildFour.jsx</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">EightteenChildFour</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

  state<span class="token operator">=</span><span class="token punctuation">{</span>

      name<span class="token operator">:</span><span class="token string">'这是组件EightteenChildFour的name 值'</span>

  <span class="token punctuation">}</span>

 

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onRef</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">// -&gt;将EightteenChildFour传递给父组件this.props.onRef()方法</span>

  <span class="token punctuation">}</span>

 

  <span class="token function-variable function">click</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'这是组件click 方法改变EightteenChildFour改变的name 值'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token punctuation">}</span><span class="token punctuation">;</span>

 

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>

      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>click<span class="token punctuation">}</span><span class="token operator">&gt;</span>

          点击改变组件EightteenChildFour的name 值

        <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

eighteen<span class="token punctuation">.</span>jsx

<span class="token operator">&lt;</span>EightteenChildFour onRef<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>eightteenChildFourRef<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>EightteenChildFour<span class="token operator">&gt;</span>

 

<span class="token function-variable function">eightteenChildFourRef</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">ref</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'eightteenChildFour的Ref值为'</span><span class="token punctuation">)</span>

  <span class="token comment">// 获取的 ref 里面包括整个组件实例</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ref<span class="token punctuation">)</span>

  <span class="token comment">// 调用子组件方法</span>

  ref<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><h2 id="_1-7-ref"><a href="#_1-7-ref" class="header-anchor">#</a> 1.7 ref</h2> <p>原理:就是通过 React 的 ref 属性获取到整个子组件实例,再进行操作</p> <p>EightteenChildFive.jsx</p> <p>// 常用的组件定义方法export default class EightteenChildFive extends React.Component {</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  state<span class="token operator">=</span><span class="token punctuation">{</span>

      name<span class="token operator">:</span><span class="token string">'这是组件EightteenChildFive的name 值'</span>

  <span class="token punctuation">}</span>

 

  <span class="token function-variable function">click</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'这是组件click 方法改变EightteenChildFive改变的name 值'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token punctuation">}</span><span class="token punctuation">;</span>

 

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>

      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>click<span class="token punctuation">}</span><span class="token operator">&gt;</span>

          点击改变组件EightteenChildFive的name 值

        <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

eighteen<span class="token punctuation">.</span>jsx

<span class="token comment">// 钩子获取实例</span>

<span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'eightteenChildFive的Ref值为'</span><span class="token punctuation">)</span>

      <span class="token comment">// 获取的 ref 里面包括整个组件实例,同样可以拿到子组件的实例</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>refs<span class="token punctuation">[</span><span class="token string">&quot;eightteenChildFiveRef&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token punctuation">}</span>

<span class="token comment">// 组件定义 ref 属性</span>

<span class="token operator">&lt;</span>EightteenChildFive ref<span class="token operator">=</span><span class="token string">&quot;eightteenChildFiveRef&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>EightteenChildFive<span class="token operator">&gt;</span>
</code></pre></div><h2 id="_1-8-redux"><a href="#_1-8-redux" class="header-anchor">#</a> 1.8 redux</h2> <p>redux 是一个独立的事件通讯插件,这里就不做过多的叙述</p> <h2 id="_1-9-mobx"><a href="#_1-9-mobx" class="header-anchor">#</a> 1.9 MobX</h2> <p>mbox 也是一个独立的事件通讯插件,这里就不做过多的叙述</p> <h2 id="_1-10-flux"><a href="#_1-10-flux" class="header-anchor">#</a> 1.10 flux</h2> <p>mobox 也是一个独立的事件通讯插件,这里就不做过多的叙述</p> <h2 id="_1-11-hooks"><a href="#_1-11-hooks" class="header-anchor">#</a> 1.11 hooks</h2> <p>1.hooks 是利用 userReducer 和 context 实现通讯,下面模拟实现一个简单的 redux<br>
2.核心文件分为 action,reducer,types<br>
action.js</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> Types <span class="token keyword">from</span> <span class="token string">'./types'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">onChangeCount</span> <span class="token operator">=</span> <span class="token parameter">count</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>

    type<span class="token operator">:</span> Types<span class="token punctuation">.</span><span class="token constant">EXAMPLE_TEST</span><span class="token punctuation">,</span>

    count<span class="token operator">:</span> count <span class="token operator">+</span> <span class="token number">1</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

reducer<span class="token punctuation">.</span>js

<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> Types <span class="token keyword">from</span> <span class="token string">&quot;./types&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> defaultState <span class="token operator">=</span> <span class="token punctuation">{</span>

  count<span class="token operator">:</span> <span class="token number">0</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">case</span> Types<span class="token punctuation">.</span><span class="token constant">EXAMPLE_TEST</span><span class="token operator">:</span>

      <span class="token keyword">return</span> <span class="token punctuation">{</span>

        <span class="token operator">...</span>state<span class="token punctuation">,</span>

        count<span class="token operator">:</span> action<span class="token punctuation">.</span>count

      <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">{</span>

      <span class="token keyword">return</span> state<span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>

types<span class="token punctuation">.</span>js

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">EXAMPLE_TEST</span> <span class="token operator">=</span> <span class="token string">'EXAMPLE_TEST'</span><span class="token punctuation">;</span>

eightteen<span class="token punctuation">.</span>jsx

<span class="token keyword">export</span> <span class="token keyword">const</span> ExampleContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//创建createContext上下文</span>

<span class="token comment">// 定义组件function ReducerCom() {</span>

  <span class="token keyword">const</span> <span class="token punctuation">[</span>exampleState<span class="token punctuation">,</span> exampleDispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>example<span class="token punctuation">,</span> defaultState<span class="token punctuation">)</span><span class="token punctuation">;</span>

 

  <span class="token keyword">return</span> <span class="token punctuation">(</span>

    <span class="token operator">&lt;</span>ExampleContext<span class="token punctuation">.</span>Provider

      value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> exampleState<span class="token punctuation">,</span> dispatch<span class="token operator">:</span> exampleDispatch <span class="token punctuation">}</span><span class="token punctuation">}</span>

    <span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span>EightteenChildThree<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>EightteenChildThree<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span>ExampleContext<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span>

  <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><p>EightteenChildThree.jsx // 组件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>  useEffect<span class="token punctuation">,</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">{</span>Button<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span>onChangeCount<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../../pages/TwoTen/store/action'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">{</span> ExampleContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../../pages/TwoTen/eighteen'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Example</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

 

    <span class="token keyword">const</span> exampleContext <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>ExampleContext<span class="token punctuation">)</span><span class="token punctuation">;</span>

 

    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 监听变化</span>

        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'变化执行啦'</span><span class="token punctuation">)</span>

    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>exampleContext<span class="token punctuation">.</span>exampleState<span class="token punctuation">.</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 

    <span class="token keyword">return</span> <span class="token punctuation">(</span>

        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>值为<span class="token punctuation">{</span>exampleContext<span class="token punctuation">.</span>exampleState<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span>Button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> exampleContext<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">onChangeCount</span><span class="token punctuation">(</span>exampleContext<span class="token punctuation">.</span>exampleState<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>点击加 <span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Example<span class="token punctuation">;</span>
</code></pre></div><p>3.hooks其实就是对原有React 的 API 进行了封装,暴露比较方便使用的钩子;</p> <p>4.钩子有:</p> <p>钩子名</p> <p>作用</p> <p>useState</p> <p>初始化和设置状态</p> <p>useEffect</p> <p>componentDidMount，componentDidUpdate和componentWillUnmount和结合体,所以可以监听useState定义值的变化</p> <p>useContext</p> <p>定义一个全局的对象,类似 context</p> <p>useReducer</p> <p>可以增强函数提供类似 Redux 的功能</p> <p>useCallback</p> <p>记忆作用,共有两个参数，第一个参数为一个匿名函数，就是我们想要创建的函数体。第二参数为一个数组，里面的每一项是用来判断是否需要重新创建函数体的变量，如果传入的变量值保持不变，返回记忆结果。如果任何一项改变，则返回新的结果</p> <p>useMemo</p> <p>作用和传入参数与 useCallback 一致,useCallback返回函数,useDemo 返回值</p> <p>useRef</p> <p>获取 ref 属性对应的 dom</p> <p>useImperativeMethods</p> <p>自定义使用ref时公开给父组件的实例值</p> <p>useMutationEffect</p> <p>作用与useEffect相同，但在更新兄弟组件之前，它在React执行其DOM改变的同一阶段同步触发</p> <p>useLayoutEffect</p> <p>作用与useEffect相同，但在所有DOM改变后同步触发</p> <p>5.useImperativeMethods</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">function</span> <span class="token function">FancyInput</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">const</span> inputRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useImperativeMethods</span><span class="token punctuation">(</span>ref<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>

    <span class="token function-variable function">focus</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

      inputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token operator">&lt;</span>input ref<span class="token operator">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span> <span class="token operator">...</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

FancyInput <span class="token operator">=</span> <span class="token function">forwardRef</span><span class="token punctuation">(</span>FancyInput<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_1-12-require-context"><a href="#_1-12-require-context" class="header-anchor">#</a> 1.12 require.context()</h2> <p>这个是 webpack 的 api,这个在 vue 技巧中有介绍,因为 Vue 和 React 工程都是基于 webpack打包,所以在 react 也可以使用</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token keyword">const</span> files <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'@/components/home'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token regex">/\.vue$/</span><span class="token punctuation">)</span><span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

files<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token keyword">const</span> name <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token string">'.vue'</span><span class="token punctuation">)</span>

  modules<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">files</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">.</span>default <span class="token operator">||</span> <span class="token function">files</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_1-13-decorator"><a href="#_1-13-decorator" class="header-anchor">#</a> 1.13 Decorator</h2> <p>定义:decorator是ES7的一个新特性，可以修改class的属性</p> <p>import React from 'react'import Test from '../../utils/decorators'</p> <p>@Test//只要Decorator后面是Class，默认就已经把Class当成参数隐形传进Decorator了。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">TwentyNine</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>

    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">'decorator.js'</span><span class="token punctuation">)</span> <span class="token comment">// 这里的this是类的一个实例</span>

        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>testable<span class="token punctuation">)</span>

    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token keyword">return</span> <span class="token punctuation">(</span>

            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>这是技巧<span class="token number">23</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

        <span class="token punctuation">)</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

 

<span class="token keyword">export</span> <span class="token keyword">default</span> TwentyNine

decorators<span class="token punctuation">.</span>js

<span class="token keyword">function</span> <span class="token function">testable</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>

  target<span class="token punctuation">.</span>isTestable <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

  target<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getDate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> testable
</code></pre></div><p>很多中间件,像 redux 里面就封装了Decorator的使用</p> <h2 id="_1-14-使用-if-else"><a href="#_1-14-使用-if-else" class="header-anchor">#</a> 1.14 使用 if...else</h2> <p>场景:有些时候需要根据不同状态值页面显示不同内容</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Four</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

  state <span class="token operator">=</span> <span class="token punctuation">{</span>

    count<span class="token operator">:</span> <span class="token number">1</span>

  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">let</span> info

    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token operator">===</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

      info<span class="token operator">=</span><span class="token punctuation">(</span>

        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>这是数量为 <span class="token number">0</span> 显示<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>

      <span class="token punctuation">)</span>

    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token operator">===</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

      info<span class="token operator">=</span><span class="token punctuation">(</span>

        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>这是数量为 <span class="token number">1</span> 显示<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>

      <span class="token punctuation">)</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>

      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>

        <span class="token punctuation">{</span>info<span class="token punctuation">}</span>

      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h2 id="_1-15-state-值改变的四种方式"><a href="#_1-15-state-值改变的四种方式" class="header-anchor">#</a> 1.15 state 值改变的四种方式</h2> <p>方式 1</p> <p>let {count} = this.state</p> <p>this.setState({count:2})</p> <p>方式 2:callBack</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>count<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span>count<span class="token operator">:</span>count<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>方式 3:接收 state 和 props 参数</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> props<span class="token punctuation">.</span>step <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>方式 4:hooks</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token comment">// 设置值</span>

<span class="token function">setCount</span><span class="token punctuation">(</span>count<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_1-16-监听states-变化"><a href="#_1-16-监听states-变化" class="header-anchor">#</a> 1.16 监听states 变化</h2> <p>1.16.x 之前使用componentWillReveiveProps</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">componentWillReceiveProps</span> <span class="token punctuation">(</span><span class="token parameter">nextProps</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>visible <span class="token operator">!==</span> nextProps<span class="token punctuation">.</span>visible<span class="token punctuation">)</span><span class="token punctuation">{</span>

      <span class="token comment">//props 值改变做的事</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>注意:有些时候componentWillReceiveProps在 props 值未变化也会触发,因为在生命周期的第一次render后不会被调用，但是会在之后的每次render中被调用 = 当父组件再次传送props</p> <p>2.16.x 之后使用getDerivedStateFromProps,16.x 以后componentWillReveiveProps也未移除</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Six</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

  state <span class="token operator">=</span> <span class="token punctuation">{</span>

    countOne<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>

    changeFlag<span class="token operator">:</span><span class="token string">''</span>

  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">clickOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">let</span> <span class="token punctuation">{</span>countOne<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>countOne<span class="token operator">:</span>countOne<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">static</span> <span class="token function">getDerivedStateFromProps</span> <span class="token punctuation">(</span><span class="token parameter">nextProps</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'变化执行'</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span><span class="token punctuation">{</span>

      changeFlag<span class="token operator">:</span><span class="token string">'state 值变化执行'</span>

    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span>countOne<span class="token punctuation">,</span>changeFlag<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state

    <span class="token keyword">return</span> <span class="token punctuation">(</span>

      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>

         <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">clickOne</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>点击加 <span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span><span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>countOne 值为<span class="token punctuation">{</span>countOne<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>changeFlag<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h2 id="_1-17-通过-ref-属性获取-component"><a href="#_1-17-通过-ref-属性获取-component" class="header-anchor">#</a> 1.17 通过 ref 属性获取 component</h2> <p>方式 1:也是最早的用法,通过 this.refs[属性名获取]
也可以作用到组件上,从而拿到组件实例</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">class</span> <span class="token class-name">RefOne</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>refs<span class="token punctuation">[</span><span class="token string">'box'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>innerHTML<span class="token operator">=</span><span class="token string">'这是 div 盒子,通过 ref 获取'</span>

  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">return</span><span class="token punctuation">(</span>

      <span class="token operator">&lt;</span>div ref<span class="token operator">=</span><span class="token string">&quot;box&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token punctuation">)</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>方式 2:回调函数,在dom节点或组件上挂载函数，函数的入参是dom节点或组件实例，达到的效果与字符串形式是一样的，都是获取其引用</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">class</span> <span class="token class-name">RefTwo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>input<span class="token punctuation">.</span>value<span class="token operator">=</span><span class="token string">'这是输入框默认值'</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>input<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">return</span><span class="token punctuation">(</span>

      <span class="token operator">&lt;</span>input ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">comp</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>input <span class="token operator">=</span> comp<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>

    <span class="token punctuation">)</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>方式 3:React.createRef()<br>
React 16.3版本后，使用此方法来创建ref。将其赋值给一个变量，通过ref挂载在dom节点或组件上，该ref的current属性,将能拿到dom节点或组件的实例</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">RefThree</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>myRef<span class="token operator">=</span>React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>myRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token operator">&lt;</span>input ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>myRef<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>方式 4:React.forwardRef
React 16.3版本后提供的，可以用来创建子组件，以传递ref</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">RefFour</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>myFourRef<span class="token operator">=</span>React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>myFourRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token operator">&lt;</span>Child ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>myFourRef<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>子组件通过React.forwardRef来创建，可以将ref传递到内部的节点或组件，进而实现跨层级的引用。forwardRef在高阶组件中可以获取到原始组件的实例.这个功能在技巧 18 会着重讲</p> <h2 id="_1-18-static-使用"><a href="#_1-18-static-使用" class="header-anchor">#</a> 1.18 static 使用</h2> <p>场景:声明静态方法的关键字,静态方法是指即使没有组件实例也可以直接调用</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Nine</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

  <span class="token keyword">static</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'静态方法调用执行啦'</span><span class="token punctuation">)</span>

  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>

      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>

        这是 <span class="token keyword">static</span> 关键字技能

      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

Nine<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">)</span>
</code></pre></div><p>注意:</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>1.ES6的class，我们定义一个组件的时候通常是定义了一个类，而static则是创建了一个属于这个类的属性或者方法
2.组件则是这个类的一个实例，component的props和state是属于这个实例的，所以实例还未创建
3.所以static并不是react定义的，而加上static关键字，就表示该方法不会被实例继承，而是直接通过类来调用,所以也是无法访问到 this
4.getDerivedStateFromProps也是通过静态方法监听值,详情请见技巧 6</p> <p>9.constructor和super</p></div> <p>回顾:</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>1.谈这两个属性之前,先回顾一下ES6 函数定义方法
2.每一个使用class方式定义的类默认都有一个constructor函数， 这个函数是构造函数的主函数， 该函数体内部的this指向生成的实例
3.super关键字用于访问和调用一个对象的父对象上的函数</p></div> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Ten</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// class 的主函数</span>

    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// React.Component.prototype.constructor.call(this),其实就是拿到父类的属性和方法</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>

      arr<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>  

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>

      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>

        这是技巧 <span class="token number">10</span>

      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h2 id="_1-19-proptypes"><a href="#_1-19-proptypes" class="header-anchor">#</a> 1.19 PropTypes</h2> <p>场景:检测传入子组件的数据类型
类型检查PropTypes自React v15.5起已弃用，请使用prop-types
方式 1:旧的写法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">PropTypeOne</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>

      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>email<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

 

PropTypeOne<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>

  name<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span> <span class="token comment">//值可为array,bool,func,number,object,symbol</span>

  <span class="token function-variable function">email</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> propName<span class="token punctuation">,</span> componentName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//自定义校验</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>

      <span class="token operator">!</span><span class="token regex">/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>

        props<span class="token punctuation">[</span>propName<span class="token punctuation">]</span>

      <span class="token punctuation">)</span>

    <span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>

        <span class="token string">&quot;组件&quot;</span> <span class="token operator">+</span> componentName <span class="token operator">+</span> <span class="token string">&quot;里的属性&quot;</span> <span class="token operator">+</span> propName <span class="token operator">+</span> <span class="token string">&quot;不符合邮箱的格式&quot;</span>

      <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>方法 2:利用 ES7 的静态属性关键字 static</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">PropTypeTwo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

  <span class="token keyword">static</span> propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>

      name<span class="token operator">:</span>PropTypes<span class="token punctuation">.</span>string

  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>

      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>11.使用类字段声明语法
场景:可以在不使用构造函数的情况下初始化本地状态，并通过使用箭头函数声明类方法，而无需额外对它们进行绑定</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>

  state <span class="token operator">=</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

 

  <span class="token function-variable function">handleIncrement</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">prevState</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>

      value<span class="token operator">:</span> prevState<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token number">1</span>

    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span><span class="token punctuation">;</span>

 

  <span class="token function-variable function">handleDecrement</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">prevState</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>

      value<span class="token operator">:</span> prevState<span class="token punctuation">.</span>value <span class="token operator">-</span> <span class="token number">1</span>

    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span><span class="token punctuation">;</span>

 

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>

      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>

        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value<span class="token punctuation">}</span>

 

        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleIncrement<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleDecrement<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token punctuation">)</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>12.异步组件<br>
1.场景:路由切换,如果同步加载多个页面路由会导致缓慢</p> <p>2.核心 API:<br>
loader:需要加载的组件<br>
loading:未加载出来的页面展示组件<br>
delay:延迟加载时间<br>
timeout:超时时间</p> <p>3.使用方法:<br>
安装 react-loadable ,babel插件安装 syntax-dynamic-import. react-loadable是通过webpack的异步import实现的</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">const</span> <span class="token function-variable function">Loading</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>loading<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> LoadableComponent <span class="token operator">=</span> <span class="token function">Loadable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

  <span class="token function-variable function">loader</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;../../components/TwoTen/thirteen&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

  loading<span class="token operator">:</span> Loading

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Thirteen</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token operator">&lt;</span>LoadableComponent<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>LoadableComponent<span class="token operator">&gt;</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>4.Loadable.Map()<br>
并行加载多个资源的高阶组件</p> <p>13.动态组件<br>
场景:做一个 tab 切换时就会涉及到组件动态加载<br>
实质上是利用三元表达式判断组件是否显示</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">class</span> <span class="token class-name">FourteenChildOne</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>这是动态组件 <span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">FourteenChildTwo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>这是动态组件 <span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

 

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Fourteen</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

  state<span class="token operator">=</span><span class="token punctuation">{</span>

      oneShowFlag<span class="token operator">:</span><span class="token boolean">true</span>

  <span class="token punctuation">}</span>

  <span class="token function-variable function">tab</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>

      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>oneShowFlag<span class="token operator">:</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>oneShowFlag<span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span>oneShowFlag<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state

    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>tab<span class="token punctuation">}</span><span class="token operator">&gt;</span>显示组件<span class="token punctuation">{</span>oneShowFlag<span class="token operator">?</span><span class="token number">2</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>

        <span class="token punctuation">{</span>oneShowFlag<span class="token operator">?</span><span class="token operator">&lt;</span>FourteenChildOne<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>FourteenChildOne<span class="token operator">&gt;</span><span class="token operator">:</span><span class="token operator">&lt;</span>FourteenChildTwo<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>FourteenChildTwo<span class="token operator">&gt;</span><span class="token punctuation">}</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>14.递归组件<br>
场景:tree组件<br>
利用React.Fragment或者 div 包裹循环</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Item</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>

      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;item&quot;</span><span class="token operator">&gt;</span>

        <span class="token punctuation">{</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

          <span class="token keyword">return</span> <span class="token punctuation">(</span>

            <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>Fragment key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span><span class="token operator">&gt;</span>

              <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>

              <span class="token punctuation">{</span><span class="token comment">// 当该节点还有children时，则递归调用本身</span>

              item<span class="token punctuation">.</span>children <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length <span class="token operator">?</span> <span class="token punctuation">(</span>

                <span class="token operator">&lt;</span>Item<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Item<span class="token operator">&gt;</span>

              <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span>

            <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>Fragment<span class="token operator">&gt;</span>

          <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>

      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>15.受控组件和不受控组件<br>
受控组件:组件拥有自己的状态</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">class</span> <span class="token class-name">Controll</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">&quot;这是受控组件默认值&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>不受控组件:组件无自己的状态,在父组件通过 ref 来控制或者通过 props 传值</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">NoControll</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>导入代码:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Sixteen</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;ref 获取的不受控组件值为&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>refs<span class="token punctuation">[</span><span class="token string">&quot;noControll&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>

      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>Controll<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Controll<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>NoControll

          value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;这是不受控组件传入值&quot;</span><span class="token punctuation">}</span>

          ref<span class="token operator">=</span><span class="token string">&quot;noControll&quot;</span>

        <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>NoControll<span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>16.高阶组件<br>
16.1 定义<br>
就是类似高阶函数的定义,将组件作为参数或者返回一个组件的组件</p> <p>16.2 实现方法<br>
1.属性代理</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">import</span> React<span class="token punctuation">,</span><span class="token punctuation">{</span>Component<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

 

<span class="token keyword">const</span> <span class="token function-variable function">Seventeen</span> <span class="token operator">=</span> <span class="token parameter">WraooedComponent</span> <span class="token operator">=&gt;</span>

  <span class="token keyword">class</span> <span class="token class-name">extends</span> React<span class="token punctuation">.</span>Component <span class="token punctuation">{</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span>

        <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">,</span>

        name<span class="token operator">:</span> <span class="token string">&quot;这是高阶组件&quot;</span>

      <span class="token punctuation">}</span><span class="token punctuation">;</span>

      <span class="token keyword">return</span> <span class="token operator">&lt;</span>WrappedComponent <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">WrappedComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

  state<span class="token operator">=</span><span class="token punctuation">{</span>

     baseName<span class="token operator">:</span><span class="token string">'这是基础组件'</span>

  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span>baseName<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state

    <span class="token keyword">const</span> <span class="token punctuation">{</span>name<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props

    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>基础组件值为<span class="token punctuation">{</span>baseName<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>通过高阶组件属性代理的得到的值为<span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

 

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">Seventeen</span><span class="token punctuation">(</span>WrappedComponent<span class="token punctuation">)</span>
</code></pre></div><p>2.反向继承<br>
原理就是利用 super 改变改组件的 this 方向,继而就可以在该组件处理容器组件的一些值</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
  <span class="token keyword">const</span> <span class="token function-variable function">Seventeen</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">WrappedComponent</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> WrappedComponent <span class="token punctuation">{</span>

        <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>baseName<span class="token operator">:</span><span class="token string">'这是通过反向继承修改后的基础组件名称'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

        <span class="token punctuation">}</span>

        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

            <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">WrappedComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

  state<span class="token operator">=</span><span class="token punctuation">{</span>

     baseName<span class="token operator">:</span><span class="token string">'这是基础组件'</span>

  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span>baseName<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state

    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>基础组件值为<span class="token punctuation">{</span>baseName<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

 

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">Seventeen</span><span class="token punctuation">(</span>WrappedComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="元素是否显示"><a href="#元素是否显示" class="header-anchor">#</a> 元素是否显示</h2> <p>一般用三元表达式</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>flag<span class="token operator">?</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>显示内容<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">:</span><span class="token string">''</span>
</code></pre></div><h2 id="dialog-组件创建"><a href="#dialog-组件创建" class="header-anchor">#</a> Dialog 组件创建</h2> <p>Dialog 应该是用的比较多的组件,下面有三种不同的创建方法<br>
方式 1:通过 state 控制组件是否显示</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
 <span class="token keyword">class</span> <span class="token class-name">NineteenChildOne</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">const</span> <span class="token function-variable function">Dialog</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>这是弹层<span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>

 

    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>dialogOneFlag <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>Dialog <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>方式 2:通过ReactDom.render创建弹层-挂载根节点外层<br>
通过原生的createElement,appendChild, removeChild和react 的ReactDOM.render,ReactDOM.   unmountComponentAtNode来控制元素的显示和隐藏</p> <p>NineteenChild.jsx</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&quot;react-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Dialog</span> <span class="token punctuation">{</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">&quot;200px&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">&quot;200px&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">&quot;absolute&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token string">&quot;200px&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token string">&quot;400px&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>div<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">&quot;dialog-box&quot;</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

  <span class="token function">show</span><span class="token punctuation">(</span><span class="token parameter">children</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// 销毁</span>

    <span class="token keyword">const</span> dom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#dialog-box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>dom<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//兼容多次点击</span>

      <span class="token comment">// 显示</span>

      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>

      ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>children<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>

  <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// 销毁</span>

    <span class="token keyword">const</span> dom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#dialog-box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span>dom<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//兼容多次点击</span>

      ReactDOM<span class="token punctuation">.</span><span class="token function">unmountComponentAtNode</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>

      dom<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>dom<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>

  <span class="token function-variable function">show</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">children</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">new</span> <span class="token class-name">Dialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function-variable function">hide</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">new</span> <span class="token class-name">Dialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>

nineteen<span class="token punctuation">.</span>jsx

<span class="token function-variable function">twoSubmit</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>

    Dialog<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token string">'这是弹层2'</span><span class="token punctuation">)</span>

  <span class="token punctuation">}</span>

  <span class="token function-variable function">twoCancel</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>

    Dialog<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token punctuation">}</span>
</code></pre></div><h2 id="react-memo"><a href="#react-memo" class="header-anchor">#</a> React.memo</h2> <p>作用:当类组件的输入属性相同时，可以使用 pureComponent 或 shouldComponentUpdate 来避免组件的渲染。现在，你可以通过把函数组件包装在 React.memo 中来实现相同的功能</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">areEqual</span><span class="token punctuation">(</span><span class="token parameter">prevProps<span class="token punctuation">,</span> nextProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token comment">/*

  如果把 nextProps 传入 render 方法的返回结果与

  将 prevProps 传入 render 方法的返回结果一致则返回 true，

  否则返回 false

  */</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>prevProps<span class="token punctuation">.</span>val <span class="token operator">===</span> nextProps<span class="token punctuation">.</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token comment">// React.memo()两个参数,第一个是纯函数,第二个是比较函数export default React.memo(function twentyChild(props) {</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;MemoSon rendered : &quot;</span> <span class="token operator">+</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>val<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">,</span> areEqual<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="react-purecomponent"><a href="#react-purecomponent" class="header-anchor">#</a> React.PureComponent</h2> <p>作用:<br>
1.React.PureComponent 和 React.Component类似，都是定义一个组件类。<br>
2.不同是React.Component没有实现shouldComponentUpdate()，而 React.PureComponent通过props和state的浅比较实现了。<br>
3.React.PureComponent是作用在类中,而React.memo是作用在函数中。<br>
4.如果组件的props和state相同时，render的内容也一致，那么就可以使用React.PureComponent了,这样可以提高组件的性能</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">TwentyOneChild</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>PureComponent</span><span class="token punctuation">{</span>  <span class="token comment">//组件直接继承React.PureComponent</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

 

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">TwentyOne</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token keyword">return</span> <span class="token punctuation">(</span>

            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>

              <span class="token operator">&lt;</span>TwentyOneChild name<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'这是React.PureComponent的使用方法'</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>TwentyOneChild<span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

        <span class="token punctuation">)</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h2 id="react-component"><a href="#react-component" class="header-anchor">#</a> React.Component</h2> <p>作用:是基于ES6 class的React组件,React允许定义一个class或者function作为组件，那么定义一个组件类，就需要继承React.Component</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">TwentyTwo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span> <span class="token comment">//组件定义方法</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token keyword">return</span> <span class="token punctuation">(</span>

            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>这是技巧<span class="token number">22</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

        <span class="token punctuation">)</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h2 id="在-jsx-打印-falsy-值"><a href="#在-jsx-打印-falsy-值" class="header-anchor">#</a> 在 JSX 打印 falsy 值</h2> <p>定义:<br>
1.falsy 值 (虚值) 是在 Boolean 上下文中认定为 false 的值;<br>
2.值有 0,&quot;&quot;,'',``,null,undefined,NaN</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">TwentyThree</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>

    state<span class="token operator">=</span><span class="token punctuation">{</span>myVariable<span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token keyword">return</span> <span class="token punctuation">(</span>

            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>myVariable<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

        <span class="token punctuation">)</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>虚值如果直接展示,会发生隐式转换,为 false,所以页面不显示</p> <h2 id="reactdom-createportal"><a href="#reactdom-createportal" class="header-anchor">#</a> ReactDOM.createPortal</h2> <p>作用:组件的render函数返回的元素会被挂载在它的父级组件上,createPortal 提供了一种将子节点渲染到存在于父组件以外的 DOM 节点的优秀的方案</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span><span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&quot;react-dom&quot;</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">{</span>Button<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;antd&quot;</span>

<span class="token keyword">const</span> modalRoot <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Modal</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">&quot;200px&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">&quot;200px&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">&quot;absolute&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token string">&quot;200px&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token string">&quot;400px&quot;</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

 

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    modalRoot<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

 

  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    modalRoot<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

 

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createPortal</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>

    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;modal&quot;</span><span class="token operator">&gt;</span>

      这个是通过ReactDOM<span class="token punctuation">.</span>createPortal创建的内容

    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

  <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">TwentyFour</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> clicks<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>handleClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

 

  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">prevState</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>

      clicks<span class="token operator">:</span> prevState<span class="token punctuation">.</span>clicks <span class="token operator">+</span> <span class="token number">1</span>

    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

 

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>

      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>

          <span class="token operator">&lt;</span>Button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>点击加<span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>点击次数<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>clicks<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>Modal<span class="token operator">&gt;</span>

          <span class="token operator">&lt;</span>Child <span class="token operator">/</span><span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span><span class="token operator">/</span>Modal<span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>这样元素就追加到指定的元素下面啦</p> <h2 id="在-react-使用innerhtml"><a href="#在-react-使用innerhtml" class="header-anchor">#</a> 在 React 使用innerHTML</h2> <p>场景:有些后台返回是 html 格式字段,就需要用到 innerHTML 属性</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">TwentyFive</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>

      <span class="token operator">&lt;</span>div dangerouslySetInnerHTML<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> __html<span class="token operator">:</span> <span class="token string">&quot;&lt;span&gt;这是渲染的 HTML 内容&lt;/span&gt;&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>为什么是危险的属性,因为这个会导致 XSS 攻击<br>
_html是两个</p> <h2 id="react-createelement"><a href="#react-createelement" class="header-anchor">#</a> React.createElement</h2> <p>语法:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>
type<span class="token punctuation">,</span>
<span class="token punctuation">[</span>props<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token operator">...</span>children<span class="token punctuation">]</span>
<span class="token punctuation">)</span>
</code></pre></div><p>源码:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">TwentySix</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>

      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>

        <span class="token punctuation">{</span>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>

          <span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span>

          <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">&quot;one&quot;</span><span class="token punctuation">,</span> className<span class="token operator">:</span> <span class="token string">&quot;two&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>

          React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;span&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">&quot;spanOne&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;这是第一个 span 标签&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

          React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;br&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

          React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;span&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">&quot;spanTwo&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;这是第二个 span 标签&quot;</span><span class="token punctuation">)</span>

        <span class="token punctuation">)</span><span class="token punctuation">}</span>

      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>原理:实质上 JSX 的 dom 最后转化为 js 都是React.createElement</p> <p>// jsx 语法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">'one'</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">'two'</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>span id<span class="token operator">=</span><span class="token string">&quot;spanOne&quot;</span><span class="token operator">&gt;</span><span class="token keyword">this</span> is spanOne<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>span id<span class="token operator">=</span><span class="token string">&quot;spanTwo&quot;</span><span class="token operator">&gt;</span><span class="token keyword">this</span> is spanTwo<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

<span class="token comment">// 转化为 js</span>

React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>

  <span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span>

 <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">&quot;one&quot;</span><span class="token punctuation">,</span> <span class="token keyword">class</span><span class="token operator">:</span> <span class="token string">&quot;two&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>

 React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span> <span class="token string">&quot;span&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">&quot;spanOne&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;this is spanOne&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

 React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;span&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">&quot;spanTwo&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;this is spanTwo&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="react-cloneelement"><a href="#react-cloneelement" class="header-anchor">#</a> React.cloneElement</h2> <p>语法:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>React<span class="token punctuation">.</span><span class="token function">cloneElement</span><span class="token punctuation">(</span>

  element<span class="token punctuation">,</span>

  <span class="token punctuation">[</span>props<span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token punctuation">[</span><span class="token operator">...</span>children<span class="token punctuation">]</span>

<span class="token punctuation">)</span>
</code></pre></div><p>作用:这个方法的作用是复制组件,给组件传值或者添加属性
核心代码</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
React<span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>children<span class="token punctuation">,</span> <span class="token parameter">child</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token keyword">return</span> React<span class="token punctuation">.</span><span class="token function">cloneElement</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> <span class="token punctuation">{</span>

    count<span class="token operator">:</span> _this<span class="token punctuation">.</span>state<span class="token punctuation">.</span>count

  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="react-fragment"><a href="#react-fragment" class="header-anchor">#</a> React.Fragment</h2> <p>作用:React.Fragment可以让你聚合一个子元素列表，并且不在DOM中增加额外节点
核心代码</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span> info <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>

      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>

        <span class="token punctuation">{</span>info<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

          <span class="token keyword">return</span> <span class="token punctuation">(</span>

            <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>Fragment key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span><span class="token operator">&gt;</span>

              <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

              <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>Fragment<span class="token operator">&gt;</span>

          <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>

      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>
</code></pre></div><h2 id="绑定事件"><a href="#绑定事件" class="header-anchor">#</a> 绑定事件</h2> <p>场景:交互就会涉及到事件点击,然后点击选中值传参也是一个很常见场景</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Three</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

  state <span class="token operator">=</span> <span class="token punctuation">{</span>

    flag<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

    flagOne<span class="token operator">:</span> <span class="token number">1</span>

  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">click</span><span class="token punctuation">(</span><span class="token parameter">data1<span class="token punctuation">,</span>data2</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'data1 值为'</span><span class="token punctuation">,</span>data1<span class="token punctuation">)</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'data2 值为'</span><span class="token punctuation">,</span>data2<span class="token punctuation">)</span>

  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>

      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">'参数 1'</span><span class="token punctuation">,</span><span class="token string">'参数 2'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>点击事件<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h2 id="给-dom-设置和获取自定义属性"><a href="#给-dom-设置和获取自定义属性" class="header-anchor">#</a> 给 DOM 设置和获取自定义属性</h2> <p>作用:有些要通过自定义属性传值</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Thirty</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

  <span class="token function-variable function">click</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;data-row&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span><span class="token punctuation">;</span>

 

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>

      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>div data<span class="token operator">-</span>row<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;属性1&quot;</span><span class="token punctuation">}</span> data<span class="token operator">-</span>col<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;属性 2&quot;</span><span class="token punctuation">}</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>click<span class="token punctuation">}</span><span class="token operator">&gt;</span>

          点击获取属性

        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h2 id="循环元素"><a href="#循环元素" class="header-anchor">#</a> 循环元素</h2> <p>内部没有封装像 vue 里面 v-for 的指令,而是通过 map 遍历</p> <p>使用方法在源码 routes.js 有详细使用</p> <h2 id="react-router"><a href="#react-router" class="header-anchor">#</a> React-Router</h2> <h2 id="_1-v3和-v4的区别"><a href="#_1-v3和-v4的区别" class="header-anchor">#</a> 1 V3和 V4的区别</h2> <p>1.V3或者说V早期版本是把router 和 layout components 分开;<br>
2.V4是集中式 router,通过 Route 嵌套，实现 Layout 和 page 嵌套,Layout 和 page 组件 是作为 router 的一部分<br>
3.在V3 中的 routing 规则是 exclusive，意思就是最终只获取一个 route<br>
4.V4 中的 routes 默认是 inclusive 的，这就意味着多个 Route 可以同时匹配和呈现.如果只想匹配一个路由，可以使用   Switch，在 Switch 中只有一个 Route  会被渲染，同时可以再在每个路由添加exact，做到精准匹配<br>
Redirect，浏览器重定向，当多有都不匹配的时候，进行匹配</p> <h2 id="_2-使用"><a href="#_2-使用" class="header-anchor">#</a> 2 使用</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> HashRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span> Switch  <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token keyword">const</span> authPath <span class="token operator">=</span> <span class="token string">'/login'</span> <span class="token comment">// 默认未登录的时候返回的页面，可以自行设置</span>

        <span class="token keyword">let</span> authed <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>state<span class="token punctuation">.</span>authed <span class="token operator">||</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'authed'</span><span class="token punctuation">)</span> <span class="token comment">// 如果登陆之后可以利用redux修改该值</span>

        <span class="token keyword">return</span> <span class="token punctuation">(</span>

            <span class="token operator">&lt;</span>Router<span class="token operator">&gt;</span>

                <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>

                    <span class="token punctuation">{</span><span class="token function">renderRoutes</span><span class="token punctuation">(</span>routes<span class="token punctuation">,</span> authed<span class="token punctuation">,</span> authPath<span class="token punctuation">)</span><span class="token punctuation">}</span>

                <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span>

        <span class="token punctuation">)</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>V4是通过 Route 嵌套，实现 Layout 和 page 嵌套,Switch切换路由的作用</p> <h2 id="样式引入方法"><a href="#样式引入方法" class="header-anchor">#</a> 样式引入方法</h2> <p>方式 1:import 导入</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">'./App.css'</span><span class="token punctuation">;</span>
</code></pre></div><p>方式 2:内联方式</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Header</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

 

    <span class="token keyword">const</span> heading <span class="token operator">=</span> <span class="token string">'头部组件'</span>

 

    <span class="token keyword">return</span><span class="token punctuation">(</span>

        <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>backgroundColor<span class="token operator">:</span><span class="token string">'orange'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{</span>heading<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><p>或者import React from 'react';</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">const</span> footerStyle <span class="token operator">=</span> <span class="token punctuation">{</span>

    width<span class="token operator">:</span> <span class="token string">'100%'</span><span class="token punctuation">,</span>

    backgroundColor<span class="token operator">:</span> <span class="token string">'green'</span><span class="token punctuation">,</span>

    padding<span class="token operator">:</span> <span class="token string">'50px'</span><span class="token punctuation">,</span>

    font<span class="token operator">:</span> <span class="token string">'30px'</span><span class="token punctuation">,</span>

    color<span class="token operator">:</span> <span class="token string">'white'</span><span class="token punctuation">,</span>

    fontWeight<span class="token operator">:</span> <span class="token string">'bold'</span>

<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">Footer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span><span class="token punctuation">(</span>

        <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span>footerStyle<span class="token punctuation">}</span><span class="token operator">&gt;</span>

            底部组件

        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><h2 id="动态绑定-classname"><a href="#动态绑定-classname" class="header-anchor">#</a> 动态绑定 className</h2> <p>原理:通过三元表达式控制 className 值</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

  <span class="token keyword">const</span> flag<span class="token operator">=</span><span class="token boolean">true</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>

    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>flag<span class="token operator">?</span><span class="token string">&quot;active&quot;</span><span class="token operator">:</span><span class="token string">&quot;no-active&quot;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>这是技巧 <span class="token number">34</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

  <span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/25/2020, 3:18:57 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/front-end-doc/assets/js/app.37fee4b8.js" defer></script><script src="/front-end-doc/assets/js/3.6a1b549d.js" defer></script><script src="/front-end-doc/assets/js/24.f23306d6.js" defer></script>
  </body>
</html>
